services:
  backend:
    build:
      context: ./backend
    environment:
      DATABASE_URL: postgresql+psycopg://ops:${POSTGRES_PASSWORD:-ops}@coal-postres:5432/ops
      APP_ENV: docker
      CORS_ORIGINS: https://dashboard.brandflow.co.za
      SEED_ON_START: "false"
    ports:
      - "8000:8000"
    networks:
      - default
      - brandflow-network

  frontend:
    build:
      context: ./frontend
      args:
        VITE_API_URL: https://dashboard.brandflow.co.za/api
        VITE_WS_URL: wss://dashboard.brandflow.co.za/ws
    depends_on:
      - backend
    ports:
      - "3000:80"
    networks:
      - default
      - brandflow-network

networks:
  brandflow-network:
    external: true
